<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<StackPane xmlns:fx="http://javafx.com/fxml"
           fx:controller="esprit.tn.souha_pi.controllers.wallet.InscriptionWalletController">

    <fx:define>
        <ToggleGroup fx:id="typeCompteGroup"/>
        <ToggleGroup fx:id="couleurGroupe"/>
    </fx:define>

    <VBox alignment="CENTER" spacing="20" maxWidth="650">
        <padding>
            <Insets top="30" bottom="30" left="30" right="30"/>
        </padding>

        <!-- Carte principale -->
        <VBox spacing="25" maxWidth="600"
              style="-fx-background-color:white;
                     -fx-padding:35;
                     -fx-background-radius:25;
                     -fx-border-radius:25;
                     -fx-border-color:#e9ecef;
                     -fx-border-width:1;
                     -fx-effect:dropshadow(gaussian, rgba(0,0,0,0.12), 20,0,0,8);">

            <!-- En-tÃªte -->
            <HBox alignment="CENTER" spacing="15">
                <Label text="ðŸ’°" style="-fx-font-size:40px;"/>
                <Label text="CRÃ‰ATION DE COMPTE WALLET"
                       style="-fx-font-size:24px; -fx-font-weight:bold; -fx-text-fill:#1e293b;"/>
            </HBox>

            <Separator/>

            <!-- Barre de progression -->
            <VBox spacing="10">
                <HBox alignment="CENTER" spacing="15">
                    <Label text="Ã‰tape" style="-fx-font-size:14px; -fx-text-fill:#64748b;"/>
                    <Label fx:id="etapeLabel" text="1/7"
                           style="-fx-font-size:16px; -fx-font-weight:bold; -fx-text-fill:#3b82f6;"/>
                    <ProgressBar fx:id="progressBar" prefWidth="350" progress="0.142"
                                 style="-fx-accent: #3b82f6;"/>
                </HBox>
                <Label text="Remplissez les informations ci-dessous"
                       style="-fx-font-size:13px; -fx-text-fill:#64748b; -fx-alignment:center;"/>
            </VBox>

            <!-- ================= Ã‰TAPE 1 : INFOS PERSONNELLES ================= -->
            <VBox fx:id="etape1" spacing="20" visible="true" managed="true">

                <Label text="ðŸ“‹ Ã‰TAPE 1 : MES INFORMATIONS PERSONNELLES"
                       style="-fx-font-size:16px; -fx-font-weight:bold; -fx-text-fill:#1e293b;"/>

                <GridPane hgap="15" vgap="12">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="30"/>
                        <ColumnConstraints percentWidth="70"/>
                    </columnConstraints>

                    <!-- Ligne 0 : Nom complet -->
                    <Label text="Nom complet :" GridPane.rowIndex="0" GridPane.columnIndex="0"
                           style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <TextField fx:id="nomField" promptText="Jean Dupont"
                               GridPane.rowIndex="0" GridPane.columnIndex="1"
                               style="-fx-background-radius:8; -fx-pref-height:35;"/>

                    <!-- Ligne 1 : Date naissance -->
                    <Label text="Date naissance :" GridPane.rowIndex="1" GridPane.columnIndex="0"
                           style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <DatePicker fx:id="dateNaissancePicker" promptText="jj/mm/aaaa"
                                GridPane.rowIndex="1" GridPane.columnIndex="1"
                                style="-fx-background-radius:8; -fx-pref-height:35;"/>

                    <!-- Ligne 2 : NationalitÃ© -->
                    <Label text="NationalitÃ© :" GridPane.rowIndex="2" GridPane.columnIndex="0"
                           style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <ComboBox fx:id="nationaliteCombo" promptText="SÃ©lectionnez"
                              GridPane.rowIndex="2" GridPane.columnIndex="1"
                              style="-fx-background-radius:8; -fx-pref-height:35;"/>

                    <!-- Ligne 3 : Pays rÃ©sidence -->
                    <Label text="Pays rÃ©sidence :" GridPane.rowIndex="3" GridPane.columnIndex="0"
                           style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <ComboBox fx:id="paysCombo" promptText="SÃ©lectionnez"
                              GridPane.rowIndex="3" GridPane.columnIndex="1"
                              style="-fx-background-radius:8; -fx-pref-height:35;"/>

                    <!-- Ligne 4 : Email -->
                    <Label text="Email :" GridPane.rowIndex="4" GridPane.columnIndex="0"
                           style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <TextField fx:id="emailField" promptText="exemple@email.com"
                               GridPane.rowIndex="4" GridPane.columnIndex="1"
                               style="-fx-background-radius:8; -fx-pref-height:35;"/>

                    <!-- Ligne 5 : TÃ©lÃ©phone -->
                    <Label text="TÃ©lÃ©phone :" GridPane.rowIndex="5" GridPane.columnIndex="0"
                           style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <TextField fx:id="telephoneField" promptText="+216 XX XXX XXX"
                               GridPane.rowIndex="5" GridPane.columnIndex="1"
                               style="-fx-background-radius:8; -fx-pref-height:35;"/>

                    <!-- Ligne 6 : Code admin (NOUVEAU) -->
                    <Label text="Code admin :" GridPane.rowIndex="6" GridPane.columnIndex="0"
                           style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <PasswordField fx:id="adminCodeField" promptText="Laisser vide pour utilisateur normal"
                                   GridPane.rowIndex="6" GridPane.columnIndex="1"
                                   style="-fx-background-radius:8; -fx-pref-height:35;"/>
                </GridPane>

                <!-- Message d'erreur (UN SEUL) -->
                <Label fx:id="erreurEtape1" text="" style="-fx-text-fill:#ef4444; -fx-font-size:13px;"/>

                <!-- Bouton suivant (UN SEUL) -->
                <HBox alignment="CENTER_RIGHT">
                    <Button text="Ã‰tape suivante â†’" onAction="#allerEtape2"
                            style="-fx-background-color:#3b82f6; -fx-text-fill:white;
                                   -fx-font-weight:bold; -fx-font-size:14px; -fx-padding:10 25;
                                   -fx-background-radius:8;"/>
                </HBox>
            </VBox>

            <!-- ================= Ã‰TAPE 2 : DOCUMENTS KYC ================= -->
            <VBox fx:id="etape2" spacing="20" visible="false" managed="false">

                <Label text="ðŸ†” Ã‰TAPE 2 : VÃ‰RIFICATION D'IDENTITÃ‰ (KYC)"
                       style="-fx-font-size:16px; -fx-font-weight:bold; -fx-text-fill:#1e293b;"/>

                <!-- PiÃ¨ce d'identitÃ© -->
                <VBox spacing="8" style="-fx-background-color:#f8fafc; -fx-padding:15; -fx-background-radius:12;">
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="ðŸ“„" style="-fx-font-size:20px;"/>
                        <Label text="PIÃˆCE D'IDENTITÃ‰" style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    </HBox>
                    <Label text="Carte nationale ou passeport (recto/verso)" style="-fx-text-fill:#64748b; -fx-font-size:13px;"/>
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <Button text="+ Ajouter fichier" onAction="#ajouterPieceIdentite"
                                style="-fx-background-color:#e2e8f0; -fx-text-fill:#1e293b;
                                       -fx-font-weight:bold; -fx-background-radius:6;"/>
                        <Label fx:id="pieceIdentiteNom" text="Aucun fichier"
                               style="-fx-text-fill:#94a3b8; -fx-font-size:12px;"/>
                    </HBox>
                </VBox>

                <!-- Selfie -->
                <VBox spacing="8" style="-fx-background-color:#f8fafc; -fx-padding:15; -fx-background-radius:12;">
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="ðŸ¤³" style="-fx-font-size:20px;"/>
                        <Label text="SELFIE DE CONTRÃ”LE" style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    </HBox>
                    <Label text="Prenez-vous en photo avec votre piÃ¨ce d'identitÃ©" style="-fx-text-fill:#64748b; -fx-font-size:13px;"/>
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <Button text="ðŸ“¸ Prendre photo" onAction="#prendreSelfie"
                                style="-fx-background-color:#e2e8f0; -fx-text-fill:#1e293b;
                                       -fx-font-weight:bold; -fx-background-radius:6;"/>
                        <Label fx:id="selfieNom" text="Pas de photo"
                               style="-fx-text-fill:#94a3b8; -fx-font-size:12px;"/>
                    </HBox>
                </VBox>

                <!-- Justificatif de domicile -->
                <VBox spacing="8" style="-fx-background-color:#f8fafc; -fx-padding:15; -fx-background-radius:12;">
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="ðŸ " style="-fx-font-size:20px;"/>
                        <Label text="JUSTIFICATIF DE DOMICILE" style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    </HBox>
                    <Label text="Facture (moins de 3 mois) ou quittance de loyer" style="-fx-text-fill:#64748b; -fx-font-size:13px;"/>
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <Button text="+ Ajouter fichier" onAction="#ajouterJustificatif"
                                style="-fx-background-color:#e2e8f0; -fx-text-fill:#1e293b;
                                       -fx-font-weight:bold; -fx-background-radius:6;"/>
                        <Label fx:id="justificatifNom" text="Aucun fichier"
                               style="-fx-text-fill:#94a3b8; -fx-font-size:12px;"/>
                    </HBox>
                </VBox>

                <HBox spacing="15" alignment="CENTER_RIGHT">
                    <Button text="â† Ã‰tape prÃ©cÃ©dente" onAction="#allerEtape1"
                            style="-fx-background-color:#e2e8f0; -fx-text-fill:#1e293b;
                                   -fx-font-weight:bold; -fx-padding:10 20; -fx-background-radius:8;"/>
                    <Button text="Ã‰tape suivante â†’" onAction="#allerEtape3"
                            style="-fx-background-color:#3b82f6; -fx-text-fill:white;
                                   -fx-font-weight:bold; -fx-padding:10 25; -fx-background-radius:8;"/>
                </HBox>
            </VBox>

            <!-- ================= Ã‰TAPE 3 : SÃ‰CURITÃ‰ ================= -->
            <VBox fx:id="etape3" spacing="20" visible="false" managed="false">

                <Label text="ðŸ” Ã‰TAPE 3 : SÃ‰CURITÃ‰ DU COMPTE"
                       style="-fx-font-size:16px; -fx-font-weight:bold; -fx-text-fill:#1e293b;"/>

                <GridPane hgap="15" vgap="12">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="30"/>
                        <ColumnConstraints percentWidth="70"/>
                    </columnConstraints>

                    <Label text="Code PIN :" GridPane.rowIndex="0" GridPane.columnIndex="0"
                           style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <PasswordField fx:id="pinField" promptText="4 Ã  6 chiffres"
                                   GridPane.rowIndex="0" GridPane.columnIndex="1"
                                   style="-fx-background-radius:8; -fx-pref-height:35;"/>

                    <Label text="Mot de passe :" GridPane.rowIndex="1" GridPane.columnIndex="0"
                           style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <PasswordField fx:id="passwordField" promptText="Min 8 caractÃ¨res"
                                   GridPane.rowIndex="1" GridPane.columnIndex="1"
                                   style="-fx-background-radius:8; -fx-pref-height:35;"/>

                    <Label text="Confirmer :" GridPane.rowIndex="2" GridPane.columnIndex="0"
                           style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <PasswordField fx:id="confirmPasswordField" promptText="Retapez le mot de passe"
                                   GridPane.rowIndex="2" GridPane.columnIndex="1"
                                   style="-fx-background-radius:8; -fx-pref-height:35;"/>

                    <Label text="Question secrÃ¨te :" GridPane.rowIndex="3" GridPane.columnIndex="0"
                           style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <ComboBox fx:id="questionCombo" promptText="Choisissez"
                              GridPane.rowIndex="3" GridPane.columnIndex="1"
                              style="-fx-background-radius:8; -fx-pref-height:35;"/>

                    <Label text="RÃ©ponse :" GridPane.rowIndex="4" GridPane.columnIndex="0"
                           style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <TextField fx:id="reponseField" promptText="Votre rÃ©ponse"
                               GridPane.rowIndex="4" GridPane.columnIndex="1"
                               style="-fx-background-radius:8; -fx-pref-height:35;"/>
                </GridPane>

                <CheckBox fx:id="twoFactorCheck" text="Activer la double authentification (recommandÃ©)"
                          style="-fx-text-fill:#334155; -fx-font-size:14px;"/>

                <HBox spacing="15" alignment="CENTER_RIGHT">
                    <Button text="â† Ã‰tape prÃ©cÃ©dente" onAction="#allerEtape2"
                            style="-fx-background-color:#e2e8f0; -fx-text-fill:#1e293b;
                                   -fx-font-weight:bold; -fx-padding:10 20; -fx-background-radius:8;"/>
                    <Button text="Ã‰tape suivante â†’" onAction="#allerEtape4"
                            style="-fx-background-color:#3b82f6; -fx-text-fill:white;
                                   -fx-font-weight:bold; -fx-padding:10 25; -fx-background-radius:8;"/>
                </HBox>
            </VBox>

            <!-- ================= Ã‰TAPE 4 : TYPE DE COMPTE ================= -->
            <VBox fx:id="etape4" spacing="20" visible="false" managed="false" VBox.vgrow="ALWAYS">

                <Label text="ðŸ’³ Ã‰TAPE 4 : CHOISISSEZ VOTRE FORMULE"
                       style="-fx-font-size:16px; -fx-font-weight:bold; -fx-text-fill:#1e293b;"/>

                <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS"
                            style="-fx-background: transparent; -fx-background-color: transparent; -fx-border-color: transparent;">
                    <VBox spacing="20">
                        <!-- Wallet Standard -->
                        <VBox spacing="5" style="-fx-background-color:#f8fafc; -fx-padding:12; -fx-background-radius:10;">
                            <RadioButton toggleGroup="$typeCompteGroup" text="WALLET STANDARD - Gratuit"
                                         style="-fx-font-weight:bold; -fx-text-fill:#1e293b;"/>
                            <Label text="âœ“ Envoi et rÃ©ception d'argent" style="-fx-padding:0 0 0 25; -fx-text-fill:#475569;"/>
                            <Label text="âœ“ Sans carte physique" style="-fx-padding:0 0 0 25; -fx-text-fill:#475569;"/>
                            <Label text="âœ“ Plafond : 1000 TND/mois" style="-fx-padding:0 0 0 25; -fx-text-fill:#475569;"/>
                        </VBox>

                        <!-- Carte Virtuelle -->
                        <VBox spacing="5" style="-fx-background-color:#f8fafc; -fx-padding:12; -fx-background-radius:10;">
                            <RadioButton toggleGroup="$typeCompteGroup" text="CARTE VIRTUELLE - 5 TND"
                                         style="-fx-font-weight:bold; -fx-text-fill:#1e293b;"/>
                            <Label text="âœ“ Carte pour paiements internet" style="-fx-padding:0 0 0 25; -fx-text-fill:#475569;"/>
                            <Label text="âœ“ Plafond : 2000 TND/mois" style="-fx-padding:0 0 0 25; -fx-text-fill:#475569;"/>
                        </VBox>

                        <!-- Carte Physique -->
                        <VBox spacing="5" style="-fx-background-color:#f8fafc; -fx-padding:12; -fx-background-radius:10;">
                            <RadioButton toggleGroup="$typeCompteGroup" text="CARTE PHYSIQUE - 10 TND"
                                         style="-fx-font-weight:bold; -fx-text-fill:#1e293b;"/>
                            <Label text="âœ“ Carte livrÃ©e Ã  domicile" style="-fx-padding:0 0 0 25; -fx-text-fill:#475569;"/>
                            <Label text="âœ“ Paiement partout" style="-fx-padding:0 0 0 25; -fx-text-fill:#475569;"/>
                            <Label text="âœ“ Retrait distributeur" style="-fx-padding:0 0 0 25; -fx-text-fill:#475569;"/>
                            <Label text="âœ“ Plafond : 5000 TND/mois" style="-fx-padding:0 0 0 25; -fx-text-fill:#475569;"/>
                        </VBox>

                        <!-- Premium -->
                        <VBox spacing="5" style="-fx-background-color:#f8fafc; -fx-padding:12; -fx-background-radius:10;">
                            <RadioButton toggleGroup="$typeCompteGroup" text="PREMIUM - 50 TND/an"
                                         style="-fx-font-weight:bold; -fx-text-fill:#1e293b;"/>
                            <Label text="âœ“ Carte mÃ©tal" style="-fx-padding:0 0 0 25; -fx-text-fill:#475569;"/>
                            <Label text="âœ“ Assurance voyage" style="-fx-padding:0 0 0 25; -fx-text-fill:#475569;"/>
                            <Label text="âœ“ Support prioritaire" style="-fx-padding:0 0 0 25; -fx-text-fill:#475569;"/>
                            <Label text="âœ“ Plafond : 10000 TND/mois" style="-fx-padding:0 0 0 25; -fx-text-fill:#475569;"/>
                        </VBox>

                        <!-- Entreprise -->
                        <VBox spacing="5" style="-fx-background-color:#f8fafc; -fx-padding:12; -fx-background-radius:10;">
                            <RadioButton toggleGroup="$typeCompteGroup" text="ENTREPRISE - 20 TND/mois"
                                         style="-fx-font-weight:bold; -fx-text-fill:#1e293b;"/>
                            <Label text="âœ“ Pour professionnels" style="-fx-padding:0 0 0 25; -fx-text-fill:#475569;"/>
                            <Label text="âœ“ Multi-utilisateurs" style="-fx-padding:0 0 0 25; -fx-text-fill:#475569;"/>
                            <Label text="âœ“ Gestion notes de frais" style="-fx-padding:0 0 0 25; -fx-text-fill:#475569;"/>
                            <Label text="âœ“ Plafond : 50000 TND/mois" style="-fx-padding:0 0 0 25; -fx-text-fill:#475569;"/>
                        </VBox>
                    </VBox>
                </ScrollPane>

                <!-- Boutons en dehors du ScrollPane -->
                <HBox spacing="15" alignment="CENTER_RIGHT" style="-fx-padding: 15 0 0 0;">
                    <Button text="â† Ã‰tape prÃ©cÃ©dente" onAction="#allerEtape3"
                            style="-fx-background-color:#e2e8f0; -fx-text-fill:#1e293b;
                                   -fx-font-weight:bold; -fx-padding:10 20; -fx-background-radius:8;"/>
                    <Button text="Ã‰tape suivante â†’" onAction="#allerEtape5"
                            style="-fx-background-color:#3b82f6; -fx-text-fill:white;
                                   -fx-font-weight:bold; -fx-padding:10 25; -fx-background-radius:8;"/>
                </HBox>
            </VBox>

            <!-- ================= Ã‰TAPE 5 : PERSONNALISATION ================= -->
            <VBox fx:id="etape5" spacing="20" visible="false" managed="false">

                <Label text="ðŸŽ¨ Ã‰TAPE 5 : PERSONNALISEZ VOTRE CARTE"
                       style="-fx-font-size:16px; -fx-font-weight:bold; -fx-text-fill:#1e293b;"/>

                <VBox spacing="5">
                    <Label text="Nom Ã  graver sur la carte :" style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <TextField fx:id="nomCarteField" promptText="JEAN DUPONT"
                               style="-fx-background-radius:8; -fx-pref-height:35;"/>
                </VBox>

                <VBox spacing="8">
                    <Label text="Choisissez la couleur :" style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <HBox spacing="15" alignment="CENTER_LEFT">
                        <!-- Les ToggleGroup sont dÃ©finis comme attributs, pas comme Ã©lÃ©ments -->
                        <RadioButton text="Noir" toggleGroup="$couleurGroupe" selected="true"/>
                        <RadioButton text="Blanc" toggleGroup="$couleurGroupe"/>
                        <RadioButton text="Bleu" toggleGroup="$couleurGroupe"/>
                        <RadioButton text="Rouge" toggleGroup="$couleurGroupe"/>
                        <RadioButton text="Or" toggleGroup="$couleurGroupe"/>
                    </HBox>
                </VBox>

                <VBox spacing="8">
                    <Label text="Options :" style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <CheckBox text="Paiement sans contact" selected="true"/>
                    <CheckBox text="Paiement Ã  l'Ã©tranger" selected="true"/>
                    <CheckBox text="Retrait distributeur" selected="true"/>
                    <CheckBox text="DÃ©couvert autorisÃ© (100 TND max)"/>
                </VBox>

                <VBox spacing="8">
                    <Label text="Plafond de paiement journalier :" style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <HBox spacing="15" alignment="CENTER_LEFT">
                        <Slider fx:id="plafondSlider" min="100" max="3000" value="500"
                                prefWidth="350" showTickLabels="true" showTickMarks="true"
                                majorTickUnit="500" minorTickCount="4"/>
                        <Label fx:id="plafondValue" text="500 TND"
                               style="-fx-font-weight:bold; -fx-text-fill:#3b82f6; -fx-font-size:16px;"/>
                    </HBox>
                </VBox>

                <HBox spacing="15" alignment="CENTER_RIGHT">
                    <Button text="â† Ã‰tape prÃ©cÃ©dente" onAction="#allerEtape4"
                            style="-fx-background-color:#e2e8f0; -fx-text-fill:#1e293b;
                                   -fx-font-weight:bold; -fx-padding:10 20; -fx-background-radius:8;"/>
                    <Button text="Ã‰tape suivante â†’" onAction="#allerEtape6"
                            style="-fx-background-color:#3b82f6; -fx-text-fill:white;
                                   -fx-font-weight:bold; -fx-padding:10 25; -fx-background-radius:8;"/>
                </HBox>
            </VBox>

            <!-- ================= Ã‰TAPE 6 : PREMIER DÃ‰PÃ”T ================= -->
            <VBox fx:id="etape6" spacing="20" visible="false" managed="false">

                <Label text="ðŸ’° Ã‰TAPE 6 : PREMIER DÃ‰PÃ”T"
                       style="-fx-font-size:16px; -fx-font-weight:bold; -fx-text-fill:#1e293b;"/>

                <GridPane hgap="15" vgap="12">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="30"/>
                        <ColumnConstraints percentWidth="70"/>
                    </columnConstraints>

                    <Label text="Montant :" GridPane.rowIndex="0" GridPane.columnIndex="0"
                           style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <TextField fx:id="montantField" promptText="50"
                               GridPane.rowIndex="0" GridPane.columnIndex="1"
                               style="-fx-background-radius:8; -fx-pref-height:35;"/>

                    <Label text="Paiement :" GridPane.rowIndex="1" GridPane.columnIndex="0"
                           style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <ComboBox fx:id="paiementCombo" promptText="Mode de paiement"
                              GridPane.rowIndex="1" GridPane.columnIndex="1"
                              style="-fx-background-radius:8; -fx-pref-height:35;"/>

                    <Label text="Devise :" GridPane.rowIndex="2" GridPane.columnIndex="0"
                           style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    <ComboBox fx:id="deviseCombo" promptText="TND"
                              GridPane.rowIndex="2" GridPane.columnIndex="1"
                              style="-fx-background-radius:8; -fx-pref-height:35;"/>
                </GridPane>

                <Label fx:id="infoMinimumLabel"
                       text="ðŸ’° Montant minimum requis : 10 TND (standard) / 20 TND (carte virtuelle) / 50 TND (carte physique)"
                       style="-fx-text-fill:#64748b; -fx-font-size:13px; -fx-padding:5 0 0 0;"/>

                <HBox spacing="15" alignment="CENTER_RIGHT">
                    <Button text="â† Ã‰tape prÃ©cÃ©dente" onAction="#allerEtape5"
                            style="-fx-background-color:#e2e8f0; -fx-text-fill:#1e293b;
                                   -fx-font-weight:bold; -fx-padding:10 20; -fx-background-radius:8;"/>
                    <Button text="Ã‰tape suivante â†’" onAction="#allerEtape7"
                            style="-fx-background-color:#3b82f6; -fx-text-fill:white;
                                   -fx-font-weight:bold; -fx-padding:10 25; -fx-background-radius:8;"/>
                </HBox>
            </VBox>

            <!-- ================= Ã‰TAPE 7 : RÃ‰CAPITULATIF ================= -->
            <VBox fx:id="etape7" spacing="20" visible="false" managed="false">

                <Label text="âœ… Ã‰TAPE 7 : VÃ‰RIFIEZ VOS INFORMATIONS"
                       style="-fx-font-size:16px; -fx-font-weight:bold; -fx-text-fill:#1e293b;"/>

                <VBox spacing="10" style="-fx-background-color:#f8fafc; -fx-padding:20; -fx-background-radius:15;">

                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="ðŸ‘¤" style="-fx-font-size:20px;"/>
                        <Label text="IDENTITÃ‰" style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    </HBox>
                    <Label fx:id="recapNom" text="-" style="-fx-padding:0 0 0 30; -fx-text-fill:#475569;"/>
                    <Label fx:id="recapEmail" text="-" style="-fx-padding:0 0 0 30; -fx-text-fill:#475569;"/>

                    <Separator/>

                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="ðŸ’³" style="-fx-font-size:20px;"/>
                        <Label text="FORMULE CHOISIE" style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    </HBox>
                    <Label fx:id="recapFormule" text="-" style="-fx-padding:0 0 0 30; -fx-text-fill:#475569;"/>
                    <Label fx:id="recapCarte" text="-" style="-fx-padding:0 0 0 30; -fx-text-fill:#475569;"/>

                    <Separator/>

                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="ðŸ’°" style="-fx-font-size:20px;"/>
                        <Label text="PREMIER DÃ‰PÃ”T" style="-fx-font-weight:bold; -fx-text-fill:#334155;"/>
                    </HBox>
                    <Label fx:id="recapMontant" text="-" style="-fx-padding:0 0 0 30; -fx-text-fill:#475569;"/>
                </VBox>

                <VBox spacing="8">
                    <CheckBox fx:id="acceptCGU" text="J'accepte les Conditions GÃ©nÃ©rales d'Utilisation"
                              style="-fx-text-fill:#334155;"/>
                    <CheckBox fx:id="acceptInfos" text="Je certifie l'exactitude des informations fournies"
                              style="-fx-text-fill:#334155;"/>
                </VBox>

                <Button text="âœ… VALIDER MA CRÃ‰ATION" onAction="#validerInscription"
                        style="-fx-background-color:#10b981; -fx-text-fill:white; -fx-font-weight:bold;
                               -fx-font-size:16px; -fx-padding:15 0; -fx-background-radius:10;"
                        maxWidth="Infinity"/>

                <HBox spacing="15" alignment="CENTER_RIGHT">
                    <Button text="â† Ã‰tape prÃ©cÃ©dente" onAction="#allerEtape6"
                            style="-fx-background-color:#e2e8f0; -fx-text-fill:#1e293b;
                                   -fx-font-weight:bold; -fx-padding:10 20; -fx-background-radius:8;"/>
                </HBox>
            </VBox>

        </VBox>

        <Label text="Â© 2026 Wallet Tunisie - SÃ©curisÃ© et fiable"
               style="-fx-text-fill:#94a3b8; -fx-font-size:12px;"/>
    </VBox>

</StackPane>