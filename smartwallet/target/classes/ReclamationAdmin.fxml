<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<AnchorPane prefHeight="700" prefWidth="1000"
            stylesheets="@css/reclamation.css"
            xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="Controllers.ReclamationAdminController">

    <VBox spacing="15"
          AnchorPane.topAnchor="10"
          AnchorPane.bottomAnchor="10"
          AnchorPane.leftAnchor="15"
          AnchorPane.rightAnchor="15">

        <!-- HEADER -->
        <HBox alignment="CENTER_LEFT" spacing="10">
            <Label styleClass="header-label" text="ðŸ› ï¸ Manage Reclamations" HBox.hgrow="ALWAYS"/>
            <Button text="â† Back to Dashboard"
                    styleClass="primary-button"
                    onAction="#backToDashboard"/>
            <Button text="ðŸšª Logout"
                    styleClass="btn-logout"
                    onAction="#handleLogout"/>
        </HBox>

        <!-- TABLE -->
        <VBox spacing="8" styleClass="section-box" VBox.vgrow="ALWAYS">
            <Label styleClass="section-title" text="ðŸ“‹ All Reclamations (AI-Enhanced)"/>

            <TableView fx:id="tableReclamations" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="colUrgent"
                                 prefWidth="100" text="Priority"/>
                    <TableColumn fx:id="colNom"
                                 prefWidth="100" text="Last Name"/>
                    <TableColumn fx:id="colPrenom"
                                 prefWidth="100" text="First Name"/>
                    <TableColumn fx:id="colCategory"
                                 prefWidth="120" text="Category (AI)"/>
                    <TableColumn fx:id="colMessage"
                                 prefWidth="300" text="Message"/>
                    <TableColumn fx:id="colStatut"
                                 prefWidth="110" text="Status"/>
                    <TableColumn fx:id="colDate"
                                 prefWidth="140" text="Date"/>
                </columns>
                <placeholder>
                    <Label text="No reclamations found."/>
                </placeholder>
            </TableView>

            <!-- AI INFO LABEL -->
            <Label fx:id="lblAIInfo"
                   styleClass="ai-info-label"
                   text="Select a reclamation to see AI analysis"/>

            <!-- ADMIN REPLY SECTION -->
            <VBox spacing="8">
                <Label styleClass="section-title" text="ðŸ’¬ Reply to Selected"/>
                <TextArea fx:id="txtReply"
                          prefHeight="80"
                          promptText="Type your reply here or use AI suggestion..."
                          styleClass="input-area"/>
                <HBox spacing="10" alignment="CENTER_RIGHT">
                    <Button fx:id="btnAISuggestion"
                            text="ðŸ¤– AI Suggestion"
                            styleClass="ai-button"
                            onAction="#handleAISuggestion"/>
                    <Button fx:id="btnReply"
                            text="ðŸ’¬ Reply (IN_PROGRESS)"
                            styleClass="primary-button"
                            onAction="#replyReclamation"/>
                    <Button fx:id="btnResolve"
                            text="âœ” Mark Resolved"
                            styleClass="success-button"
                            disable="true"
                            onAction="#resolveReclamation"/>
                    <Button fx:id="btnDelete"
                            text="ðŸ—‘ Delete"
                            styleClass="danger-button"
                            onAction="#deleteReclamation"/>
                </HBox>
            </VBox>

        </VBox>
    </VBox>

</AnchorPane>