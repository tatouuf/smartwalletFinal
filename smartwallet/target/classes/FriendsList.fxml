<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<AnchorPane prefHeight="700" prefWidth="900"
            stylesheets="@css/friendsList.css"
            xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="Controllers.FriendsListController">

    <VBox spacing="20"
          AnchorPane.topAnchor="15"
          AnchorPane.bottomAnchor="15"
          AnchorPane.leftAnchor="20"
          AnchorPane.rightAnchor="20">

        <!-- HEADER -->
        <HBox alignment="CENTER_LEFT" styleClass="header-bar" spacing="20">
            <padding><Insets top="10" bottom="10" left="15" right="15"/></padding>

            <Label styleClass="header-title" text="ðŸ‘¥ My Friends" HBox.hgrow="ALWAYS"/>

            <!-- Pending requests badge -->
            <VBox alignment="CENTER" styleClass="pending-badge">
                <Label styleClass="badge-label" text="Pending Requests"/>
                <Label fx:id="lblPendingCount" styleClass="badge-count" text="0"/>
            </VBox>

            <!-- NEW: Notifications badge -->
            <VBox alignment="CENTER" styleClass="notification-badge">
                <Label styleClass="badge-label" text="Notifications"/>
                <Label fx:id="lblNotificationCount" styleClass="badge-count" text="0"/>
            </VBox>



            <Button text="ðŸ’° Wallet"
                    styleClass="btn-manage"
                    onAction="#handlewallet"/>



            <Button text="ðŸ“‹ Manage Requests"
                    styleClass="btn-manage"
                    onAction="#handleManageRequests"/>

            <!-- NEW: Notifications button -->

            <Button text="ðŸ”” Notifications"
                    styleClass="btn-manage"
                    onAction="#handleNotifications"/>

            <Button text="ðŸ“© Reclamations"
                    styleClass="btn-manage"
                    onAction="#handleReclamations"/>

            <Button text="ðŸšª Logout"
                    styleClass="btn-logout"
                    onAction="#handleLogout"/>
        </HBox>

        <!-- FRIENDS LIST -->
        <VBox spacing="10" styleClass="section-box" VBox.vgrow="ALWAYS">
            <Label styleClass="section-title" text="âœ… My Friends"/>

            <TableView fx:id="tableFriends" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="colFriendNom"
                                 prefWidth="400" text="Last Name"/>
                    <TableColumn fx:id="colFriendPrenom"
                                 prefWidth="400" text="First Name"/>
                </columns>
                <placeholder><Label text="No friends yet. Send a friend request!"/></placeholder>
            </TableView>

            <HBox spacing="10" alignment="CENTER_RIGHT">
                <Button fx:id="btnRemoveFriend"
                        text="âŒ Remove Friend"
                        styleClass="btn-warning"
                        onAction="#handleRemoveFriend"/>
                <Button fx:id="btnBlockFriend"
                        text="ðŸš« Block"
                        styleClass="btn-danger"
                        onAction="#handleBlockFriend"/>
            </HBox>
        </VBox>

        <!-- BOTTOM ROW: BLOCKED & SENT REQUESTS -->
        <HBox spacing="20" VBox.vgrow="ALWAYS">

            <!-- BLOCKED USERS -->
            <VBox spacing="10" styleClass="section-box" HBox.hgrow="ALWAYS">
                <Label styleClass="section-title" text="ðŸš« Blocked Users"/>

                <TableView fx:id="tableBlocked" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colBlockedNom"
                                     prefWidth="200" text="Last Name"/>
                        <TableColumn fx:id="colBlockedPrenom"
                                     prefWidth="200" text="First Name"/>
                    </columns>
                    <placeholder><Label text="No blocked users."/></placeholder>
                </TableView>

                <HBox alignment="CENTER_RIGHT">
                    <Button fx:id="btnUnblock"
                            text="âœ” Unblock"
                            styleClass="btn-primary"
                            onAction="#handleUnblock"/>
                </HBox>
            </VBox>

            <!-- SENT REQUESTS -->
            <VBox spacing="10" styleClass="section-box" HBox.hgrow="ALWAYS">
                <Label styleClass="section-title" text="â³ Sent Requests"/>

                <TableView fx:id="tableSent" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colSentNom"
                                     prefWidth="200" text="Last Name"/>
                        <TableColumn fx:id="colSentPrenom"
                                     prefWidth="200" text="First Name"/>
                    </columns>
                    <placeholder><Label text="No pending sent requests."/></placeholder>
                </TableView>

                <HBox alignment="CENTER_RIGHT">
                    <Button fx:id="btnCancelRequest"
                            text="âŒ Cancel"
                            styleClass="btn-warning"
                            onAction="#handleCancelRequest"/>
                </HBox>
            </VBox>

        </HBox>

    </VBox>

</AnchorPane>